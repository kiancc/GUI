{"ast":null,"code":"var _jsxFileName = \"/Users/kchong/Documents/Uni/year2/Term 2/GUI/GUI-labs/Resources/minesweeper/src/components/minefield/Board.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Square from './Square';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Board({\n  isActive,\n  setIsActive,\n  flag,\n  setFlag\n}) {\n  _s();\n  // initialises board\n  const [board, setSquares] = useState(Array(64).fill(null));\n  useEffect(() => {\n    // initialises the board when the component mounts\n    let board = Array(8).fill(null).map(() => Array(8).fill(null));\n\n    // adds random mines\n    const num_mines = 10;\n    for (let i = 0; i < num_mines; i++) {\n      let m = Math.floor(Math.random() * 8);\n      let n = Math.floor(Math.random() * 8);\n      while (board[m][n] != null) {\n        m = Math.floor(Math.random() * 8);\n        n = Math.floor(Math.random() * 8);\n      }\n      board[m][n] = 'X';\n    }\n\n    // populates num adj mines in squares\n    for (let i = 0; i < 8; i++) {\n      for (let j = 0; j < 8; j++) {\n        let num_mines = 0;\n        if (board[i][j] !== 'X') {\n          const adj_pos = [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]];\n          for (let n = 0; n < adj_pos.length; n++) {\n            const idx = adj_pos[n][0] + i;\n            const jdx = adj_pos[n][1] + j;\n            if (0 <= idx && idx < 8 && 0 <= jdx && jdx < 8) {\n              if (board[idx][jdx] === 'X') {\n                num_mines++;\n              }\n            }\n          }\n          board[i][j] = num_mines;\n        }\n      }\n    }\n\n    // Set the generated board in state (this can later be passed to squares)\n    setSquares(board);\n  }, []);\n  function handleClick(i) {\n    if (isActive === false) {\n      setIsActive(true);\n    }\n    let nextSquares = squares.slice();\n    let r = Math.floor(i / 8);\n    let c = i % 8;\n    if (board[r][c] == \"0\") {\n      // do a dfs and clear adjacent zeros\n      nextSquares[i] = board[r][c];\n      let stack = [[r, c]];\n      let visited = new Set();\n      visited.add(i);\n      while (stack.length > 0) {\n        let pos = stack.pop();\n        const adj_pos = [[-1, 0], [0, -1], [1, 0], [0, 1]];\n        for (let n = 0; n < adj_pos.length; n++) {\n          const idx = pos[0] + adj_pos[n][0];\n          const jdx = pos[1] + adj_pos[n][1];\n          if (0 <= idx && idx < 8 && 0 <= jdx && jdx < 8) {\n            if (board[idx][jdx] == \"0\" && visited.has(idx * 8 + jdx) === false) {\n              nextSquares[idx * 8 + jdx] = board[idx][jdx];\n              stack.push([idx, jdx]);\n              visited.add(idx * 8 + jdx);\n            }\n          }\n        }\n      }\n    } else if (board[r][c] != \"X\") {\n      // if the square isn't a mine, show surrounding tiles\n      nextSquares[i] = board[r][c];\n    } else {\n      nextSquares[i] = \"X\";\n    }\n    setSquares(nextSquares);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board\",\n    children: squares.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: row.map((square, colIndex) => {\n        const index = rowIndex * 8 + colIndex;\n        return /*#__PURE__*/_jsxDEV(Square, {\n          value: square,\n          onSquareClicked: () => handleClick(index)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this);\n      })\n    }, rowIndex, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(Board, \"yXay7vsKpJPANxGfDXX6mEC3PBo=\");\n_c = Board;\nexport default Board;\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["useState","useEffect","Square","jsxDEV","_jsxDEV","Board","isActive","setIsActive","flag","setFlag","_s","board","setSquares","Array","fill","map","num_mines","i","m","Math","floor","random","n","j","adj_pos","length","idx","jdx","handleClick","nextSquares","squares","slice","r","c","stack","visited","Set","add","pos","pop","has","push","className","children","row","rowIndex","square","colIndex","index","value","onSquareClicked","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kchong/Documents/Uni/year2/Term 2/GUI/GUI-labs/Resources/minesweeper/src/components/minefield/Board.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Square from './Square';\n\nfunction Board({ isActive, setIsActive, flag, setFlag }) {\n  // initialises board\n  const [board, setSquares] = useState(Array(64).fill(null));\n  \n  useEffect(() => {\n    // initialises the board when the component mounts\n    let board = Array(8).fill(null).map(() => Array(8).fill(null));\n\n    // adds random mines\n    const num_mines = 10;\n    for (let i = 0; i < num_mines; i++) {\n      let m = Math.floor(Math.random() * 8);\n      let n = Math.floor(Math.random() * 8);\n      while (board[m][n] != null) {\n        m = Math.floor(Math.random() * 8);\n        n = Math.floor(Math.random() * 8);\n      }\n      board[m][n] = 'X';\n    }\n\n    // populates num adj mines in squares\n    for (let i = 0; i < 8; i++) {\n      for (let j = 0; j < 8; j++) {\n        let num_mines = 0;\n        if (board[i][j] !== 'X') {\n          const adj_pos = [\n            [-1, -1], [-1, 0], [-1, 1],\n            [0, -1], [0, 1], [1, -1],\n            [1, 0], [1, 1]\n          ];\n          for (let n = 0; n < adj_pos.length; n++) {\n            const idx = adj_pos[n][0] + i;\n            const jdx = adj_pos[n][1] + j;\n            if (0 <= idx && idx < 8 && 0 <= jdx && jdx < 8) {\n              if (board[idx][jdx] === 'X') {\n                num_mines++;\n              }\n            }\n          }\n          board[i][j] = num_mines;\n        }\n      }\n    }\n\n    // Set the generated board in state (this can later be passed to squares)\n    setSquares(board);\n  }, []);\n\n  function handleClick(i){\n    if (isActive === false) {\n      setIsActive(true);\n    }\n    let nextSquares = squares.slice();\n    let r = Math.floor(i / 8);\n    let c = i % 8;\n\n    if (board[r][c] == \"0\") {\n      // do a dfs and clear adjacent zeros\n      nextSquares[i] = board[r][c];\n      let stack = [[r, c]];\n      let visited = new Set();\n      visited.add(i);\n\n      while (stack.length > 0) {\n        let pos = stack.pop();\n        const adj_pos = [[-1,0], [0,-1], [1,0], [0,1]];\n        for (let n = 0; n < adj_pos.length; n++) {\n          const idx = pos[0] + adj_pos[n][0];\n          const jdx = pos[1] + adj_pos[n][1];\n          if (0 <= idx && idx < 8 && 0 <= jdx && jdx < 8) {\n            if (board[idx][jdx] == \"0\" && visited.has(idx * 8 + jdx) === false) {\n              nextSquares[idx * 8 + jdx] = board[idx][jdx];\n              stack.push([idx, jdx]);\n              visited.add(idx * 8 + jdx);\n            }\n          }\n        }\n      }\n    }\n    else if (board[r][c] != \"X\") {\n      // if the square isn't a mine, show surrounding tiles\n      nextSquares[i] = board[r][c];\n    }\n    else{\n      nextSquares[i] = \"X\";\n    }\n    setSquares(nextSquares);\n  }\n\n  return (\n    <div className=\"board\">\n      {squares.map((row, rowIndex) => (\n        <div key={rowIndex} className=\"board-row\">\n          {row.map((square, colIndex) => {\n            const index = rowIndex * 8 + colIndex;\n            return (\n              <Square\n                key={index}\n                value={square}\n                onSquareClicked={() => handleClick(index)}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default Board;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}